TODO:

1. Упростить архитектуру
2. Описать функционал планирования эпиков

[Ссылка на макет](https://excalidraw.com/#json=UwGGxt0zEjpKaEfCkjzaA,62KzQPPLFIvuNHfWO5aw8g)

## Описание функционала(по страницам)

### Ролевая модель:

- `reader` - только чтение
- `admin` - чтение и изменение всего

### Статусная модель:

- `created` - присваивается спринту после создания.
- `in_progress` - присваивается спринту после нажатия на кнопку `Начать спринт`
- `finished` - присваивается спринту после нажатия на кнопку `Завершить спринт`

### 1. Команда

Страница с таблицей членов команды.

Роут: `/team`

Модель данных:

```typescript
type User = {
  id: string;
  email: string;
  name: string;
  role: UserRoles;
  specialization: string;
};

type Team = User[];
```

<b>User story:</b>

1. Я как член команды разработки, хочу видеть список своей команды, чтобы понимать:

- кто со мной работает
- какая специализация у членов команды
- контакты членов команды

2. Я как лид команды разработки, хочу иметь возможность добавлять/изменять/удалять членов команды, чтобы список мог быть в актуальном состоянии.

<b>Acceptance criteria:</b>

1. Находясь на странице `/team`, имея роль `reader`, `admin`, я должен увидеть таблицу со следующими полями:

- Имя
- Почтовый адрес
- Роль
- Специализация

2. Находясь на странице `/team` и имея роль `admin`, когда я нажимаю на кнопку "Добавить члена команды" - должно открыться модальное окно
   со следующими полями для ввода:

- Имя (текстовое)
- Электронная почта (текстовое)
- Роль (селект)
- Специализация (текстовое)
- Кнопка "Добавить"

Когда я введу значения в поля и нажму на кнопку "Добавить", пользователь должен добавится в список таблицы.

3. Находясь на странице `/team` и имея роль `admin`, я должен видеть в каждой строке таблицы кнопку "Редактировать".

Когда я нажму на нее, должно открвться модальное окно в котором можно редактировать любое из существующих полей.

Когда я нажму на кнопку "Сохранить", информация о пользователе должна обновиться.

4. Находясь на странице `/team` и имея роль `admin`, я должен видеть в каждой строке таблицы кнопку "Удалить".

Когда я нажму на нее, должно открвться модальное окно в котором система спросит меня о корректности моих действий.

Когда я нажму на кнопку "Да", пользователь должен удалиться из таблицы.

### 2. Спринты

Роут: `/sprints`

Модель данных:

```typescript
enum SprintStatus {
  created = "created",
  in_progess = "in_progess",
  finished = "finished",
}

type Sprint = {
  id: string;
  number: number;
  startDate: string;
  endDate: string;
  capacity: number;
  goal: string;
  status: SprintStatus;
  tasks: Task[];
};

type Sprints = Sprint[];
```

Страница, которая отображает список спринтов.

<b>User story:</b>

1. Я как член/лид команды хочу видеть список спринтов с их информацией, чтобы знать:

- информацию о текущем спринте(дата начала/конца, объем, цель и тд)
- статистику по предыдущем спринтам, для планирования будущих, учета ошибок и тд.

2. Я как лид команды хочу иметь возможность добавлять/изменять/удалять спринт для того, чтобы поддерживать информацию о спринтах в актуальном состоянии.

<b>Acceptance criteria:</b>

1. Находясь на странице `/sprints`, имея роль `reader`, `admin`, я должен увидеть таблицу со следующими полями:

- Номер
- Дату начала/конца
- Объем
- Статус
- Цель

2. Находясь на странице `/sprints` и имея роль `admin`, когда я нажимаю на кнопку "Добавить спринт" - должно открыться модальное окно
   со следующими полями для ввода:

- Дата начала (дата)
- Дата конца (дата)
- Цель (текстовое)
- Кнопка "Добавить"

Когда я введу значения в поля и нажму на кнопку "Добавить", спринт должен добавится в список таблицы.
А так же статус спринта должен поменяться на `created`.

3. Находясь на странице `/sprints` и имея роль `admin`, я должен видеть в каждой строке таблицы кнопку "Редактировать".

Когда я нажму на нее, должно открыться модальное окно в котором можно редактировать любое из существующих полей(которые были доступны при создании).

Когда я нажму на кнопку "Сохранить", информация о спринте должна обновиться.

4. Находясь на странице `/sprints` и имея роль `admin`, я должен видеть в каждой строке таблицы кнопку "Удалить".

Когда я нажму на нее, должно открыться модальное окно в котором система спросит меня о корректности моих действий.

Когда я нажму на кнопку "Да", спринт должен удалиться из таблицы.

### 3. Детальная страница спринта

Роут: `/sprints/:id`

Модель данных:

```typescript
type DiscoveryStage =
  | "analysis"
  | "design"
  | "architecture"
  | "grooming"
  | "estimating"
  | "planning";

type SprintStage =
  | "frontend"
  | "backend"
  | "frontend & backend integration"
  | "test"
  | "bugfix"
  | "release";

type TaskFragment = {
  id: string;
  startDate: string;
  endDate: string;
  assignee: User;
};

type Task = {
  id: string;
  sprintId: string;
  name: string;
  assigneeList?: User[]; // совокупность членов команды, назначенных на фрагменты
  link?: string;
};

type Tasks = Task[];
```

Страница, которая отображает детальную информацию спринта.

Важное замечание: если задача запланирована выполняться несколько спринтов, то мы просто переносим ее фрагменты(например тестирования или деплоя в следующий спринт)

<b>User story:</b>

1. Я как лид команды, хочу иметь возможность добавлять задачи в спринт, чтобы я мог спланировать спринт и понимать из каких задач он состоит
2. Я как лид команды, хочу иметь возможность удалять/изменять задачи в спринте, чтобы поддерживать спринт в актуальном состоянии
3. Я как лид команды, хочу иметь возможность добавлять фрагменты задачи, чтобы понимать:

- кто несет ответственность за каждый фрагмент задачи
- с какого по какое число планируется сделать фрагмент задачи
- какая активность(пример: фронтенд, бекенд, тестирование) планируется в этот фрагмент задачи

4. Я как лид команды, хочу иметь возможность удалять/изменять фрагмент задачи, чтобы мочь менять планы, если разработка или кто-то другой не вписывается в планы.
   А так же для того, чтобы видеть актуальное состояние спринта на доске.
5. Я как член команды, хочу обладать актуальной информацией о том, что и когда я должен сделать в спринте.
6. Я как лид команды, хочу иметь возможность стартовать/завершать спринты, чтобы в таблице иметь информацию о текущем/завершенных спринтах.

<b>User story на будущее:</b>

1. Я как лид команды хочу видеть каждый перенос срока по фрагменту для того, чтобы потом проанализировать почему так вышло.

<b>Acceptance criteria:</b>

1. Имея роль `reader`, `admin`, я должен видеть список задач запланированных в спринт
2. Имея роль `reader`, `admin`, я должен видеть фрагменты по каждой задаче, запланированной в спринт
3. Имея роль `reader`, `admin`, когда я наведу/нажму на фрагмент, я должен видеть информацию о фрагменте(дата его старта/конца, название, ответственного)
4. Имея роль `admin`, когда я нажму на `Добавить задачу`, должна открыться модалка с формой для создания задачи. После добавления задачи, она должна появится в списке задач.
5. Имея роль `admin`, когда я нажму на `Редактировать задачу` возле имени задачи, должна открыться модалка с формой для редактирования задачи.
6. Имея роль `admin`, когда я нажму на `Удалить задачу` возле имени задачи, задача должна удалиться из списка задач.
7. Имея роль `admin`, когда я нажму на `Добавить фрагмент`, должна открыться модалка с формой для создания фрагмента. После добавления фрагмента, он должен появится напротив задачи в выбранные даты
8. Имея роль `admin`, когда я нажму/наведу на фрагмент задачи должно появится всплывающее окно с информацией о фрагменте. А так же две кнопки для редактирования/удаления фрагмента.
9. Имея роль `admin`, когда я нажму на кнопку `Удалить фрагмент`, он должен удалиться из списка фрагментов.
10. Имея роль `admin`, когда я нажму на кнопку `Редактировать фрагмент`, должна открыться модалка для редактирования фрагмента. После редактирования фрагмента, информация о нем должна измениться.
11. Имея роль `admin`, когда я добавлю два фрагмента в одну/пересекающуюся дату, фрагменты должны поделить между собой высоту строки поровну, чтобы было видно, что два фрагмента выполняются параллельно в один день (пример: разработка фронта и бека как правило ведется параллельно).
12. Имея роль `admin`, когда я нажму на кнопку `Начать спринт` - статус спринта должен поменяться на `in_progress`, в интерфейсе должна появится кнопка `Завершить спринт`.
13. Имея роль `admin`, когда я нажму на кнопку `Завершить спринт` - статус спринта должен поменяться на `finished`, а система должна перевести нас на список спринтов.
14. Имея роль `admin` и спринт в статусе `finished`, когда я перейду на детальную страницу спринта, система должна задизейблить/скрыть все кнопки изменения задач/фрагментов.

На будущее:

1. Планирование работы по спринтам и эпикам разные вещи и делать это необходимо по-разному и отдельно друг от друга:

- планирование спринта нужно, чтобы определить кто, чем и когда занимается в итерацию
- планирование эпика нужно, чтобы видеть целиком производственный процесс относительно календаря и знать/не забывать какие мероприятия нужно проводить (пример: разработка запланирована на такую то дату, значит до этого времени нужно погрумить и тд).
