TODO:

1. Упростить архитектуру
2. Описать функционал планирования эпиков

[Ссылка на макет](https://excalidraw.com/#json=UwGGxt0zEjpKaEfCkjzaA,62KzQPPLFIvuNHfWO5aw8g)

## Описание функционала(по страницам)

### Ролевая модель:

- `reader` - только чтение
- `admin` - чтение и изменение всего

### 1. Команда

Страница с таблицей членов команды.

Роут: `/team`

Модель данных:

```typescript
type User = {
  id: string;
  email: string;
  name: string;
  role: UserRoles;
  specialization: string;
};

type Team = User[];
```

<b>User story:</b>

1. Я как член команды разработки, хочу видеть список своей команды, чтобы понимать:

- кто со мной работает
- какая специализация у членов команды
- контакты членов команды

2. Я как лид команды разработки, хочу иметь возможность добавлять/изменять/удалять членов команды, чтобы список мог быть в актуальном состоянии.

<b>Acceptance criteria:</b>

1. Находясь на странице `/team`, имея роль `reader`, `admin`, я должен увидеть таблицу со следующими полями:

- Имя
- Почтовый адрес
- Роль
- Специализация

2. Находясь на странице `/team` и имея роль `admin`, когда я нажимаю на кнопку "Добавить члена команды" - должно открыться модальное окно
   со следующими полями для ввода:

- Имя (текстовое)
- Электронная почта (текстовое)
- Роль (селект)
- Специализация (текстовое)
- Кнопка "Добавить"

Когда я введу значения в поля и нажму на кнопку "Добавить", пользователь должен добавится в список таблицы.

3. Находясь на странице `/team` и имея роль `admin`, я должен видеть в каждой строке таблицы кнопку "Редактировать".

Когда я нажму на нее, должно открвться модальное окно в котором можно редактировать любое из существующих полей.

Когда я нажму на кнопку "Сохранить", информация о пользователе должна обновиться.

4. Находясь на странице `/team` и имея роль `admin`, я должен видеть в каждой строке таблицы кнопку "Удалить".

Когда я нажму на нее, должно открвться модальное окно в котором система спросит меня о корректности моих действий.

Когда я нажму на кнопку "Да", пользователь должен удалиться из таблицы.

### 2. Спринты

Роут: `/sprints`

Модель данных:

```typescript
enum SprintStatus {
  created = "created",
  planned = "planned",
  finished = "finished",
}

type Sprint = {
  id: string;
  number: number;
  startDate: string;
  endDate: string;
  capacity: number;
  goal: string;
  status: SprintStatus;
  tasks: Task[];
};

type Sprints = Sprint[];
```

Страница, которая отображает список спринтов.

<b>User story:</b>

1. Я как член/лид команды хочу видеть список спринтов с их информацией, чтобы знать:

- информацию о текущем спринте(дата начала/конца, объем, цель и тд)
- статистику по предыдущем спринтам, для планирования будущих, учета ошибок и тд.

2. Я как лид команды хочу иметь возможность добавлять/изменять/удалять спринт для того, чтобы поддерживать информацию о спринтах в актуальном состоянии.

<b>Acceptance criteria:</b>

1. Находясь на странице `/sprints`, имея роль `reader`, `admin`, я должен увидеть таблицу со следующими полями:

- Номер
- Дату начала/конца
- Объем
- Статус
- Цель

2. Находясь на странице `/sprints` и имея роль `admin`, когда я нажимаю на кнопку "Добавить спринт" - должно открыться модальное окно
   со следующими полями для ввода:

- Дата начала (дата)
- Дата конца (дата)
- Цель (текстовое)
- Кнопка "Добавить"

Когда я введу значения в поля и нажму на кнопку "Добавить", спринт должен добавится в список таблицы.

3. Находясь на странице `/sprints` и имея роль `admin`, я должен видеть в каждой строке таблицы кнопку "Редактировать".

Когда я нажму на нее, должно открыться модальное окно в котором можно редактировать любое из существующих полей(которые были доступны при создании).

Когда я нажму на кнопку "Сохранить", информация о спринте должна обновиться.

4. Находясь на странице `/sprints` и имея роль `admin`, я должен видеть в каждой строке таблицы кнопку "Удалить".

Когда я нажму на нее, должно открыться модальное окно в котором система спросит меня о корректности моих действий.

Когда я нажму на кнопку "Да", спринт должен удалиться из таблицы.

### 3. Детальная страница спринта

Роут: `/sprints/:id`

Модель данных:

```typescript
type DiscoveryStage =
  | "analysis"
  | "design"
  | "architecture"
  | "grooming"
  | "estimating"
  | "planning";

type SprintStage =
  | "frontend"
  | "backend"
  | "frontend & backend integration"
  | "test"
  | "bugfix"
  | "release";

type TaskFragment = {
  id: string;
  startDate: string;
  endDate: string;
  assignee: User;
};

type Task = {
  id: string;
  sprintId: string;
  name: string;
  assigneeList?: User[]; // совокупность членов команды, назначенных на фрагменты
};

type Tasks = Task[];
```

Страница, которая отображает детальную информацию спринта.

Важное замечание: если задача запланирована выполняться несколько спринтов, то мы просто переносим ее фрагменты(например тестирования или деплоя в следующий спринт)

<b>User story:</b>

1. Я как лид команды хочу иметь возможность добавлять задачи в спринт, чтобы я мог спланировать спринт и понимать из каких задач он состоит
2. Я как лид команды хочу иметь возможность удалять/изменять задачи в спринте, чтобы поддерживать спринт в актуальном состоянии
3. Я как лид команды хочу иметь возможность добавлять фрагменты задачи, чтобы понимать:

- кто несет ответственность за каждый фрагмент задачи
- с какого по какое число планируется сделать фрагмент задачи
- какая активность(пример: фронтенд, бекенд, тестирование) планируется в этот фрагмент задачи

4. Я как лид команды хочу иметь возможность удалять/изменять фрагмент задачи, чтобы мочь менять планы, если разработка или кто-то другой не вписывается в планы.
   А так же для того, чтобы видеть актуальное состояние спринта на доске.
5. Я как член команды хочу обладать актуальной информацией о том, что и когда я должен сделать в спринте.

<b>User story на будущее:</b>

1. Я как лид команды хочу видеть каждый перенос срока по фрагменту для того, чтобы потом проанализировать почему так вышло.

Открытые вопросы на будущее:

- Эпик должен биться на две фазы "discovery" и "delivery" как это сделать?
- я хочу планировать не только спринт, а в целом производстенный процесс, как это лучше сделать?
- как определять где границы начала и конца спринта если разделить эпик на две фазы
- а обязательно ли это должен быть эпик? можно сделать гибче и функционал будет предназначен для планирования любой большой задачи
- можно сделать список задач, каждая задача может быть детализированы на фрагменты
- большие задачи могут быть параллельными, как и фазы дискавери и деливери параллельны в разработке, поэтому при планировании одной большой задачи - необходимо видеть какие активности есть в планируемые дни
- так как задачи могут быть параллельны - необходимо видеть картину целиком, те открывать календарь помесячно
- вообще эпики и спринты связаны не напрямую и один эпик может легко делаться более 1 спринта, а так же в конце спринта не обязательно деплоится какая то фича
  из этого следует что это две разны сущности

Возможные варианты:

1. сделать список "больших задач", каждая большая задач содержит в себе фрагменты(маленькие задачи для каждого из специалистов)
2. по умолчанию будет видно весь производстенный процесс, но можно так же будет сделать отображение "только деливери" или "только дискавери"
3. эпики и спринты это две разные сущности и мы можем планировать их отдельно, по сути у эпика есть целый производственный процесс
   со всеми его шагами, а задача спринта это итеративно пилить какие тот фичи и регулярно доставлять их

Поэтому:

1. Сначала нужно сделать планирование спринта, в котором нам будет понятно кто и когда чем занимается внутри него.
   Чтобы можно было открыть какой либо эпик из списка, перейти на его детальную страницу и увидеть там на временной рамке
2. Далее нужно сделать планирование эпика, чтобы было понятно когда и кто делает работу

Есть 2 потребности

1. планировать большие задачи(эпики) и знать когда какой этап будет проходить(груминг, планирование, разработка, деплой и тд)
2. планировать спринт и знать кто чем и когда внутри спринта будет заниматься
